---
params: 
  datum: "26.11.2021"
---

## Automatisierte Reports

<!-- 

1.  Recap letzter Woche?

2.  Parameter 

    1. Was sind Parameter? 
    
    2. Parameter definieren
    
    3. Parameter im Code benutzen

    1.  Radio Button

    2.  Liste

    3.  Range

3.  Parameter per Hand eingeben

4.  Parameter mit code "eingeben"

Frie: hier müsste man ggf. for loops einführen oder purrr::walk - das ist in den bisherigen lektionen noch nicht drin oder? (+1 Nina)
Idee: Vielleicht könnte man hier eine Beobachtung einpflegen, die dann in Graphiken, Tabellen und Text immer mit dem Rest verglichen wird.

Frie: weiß nicht ob das zu weit geht und zu technisch wird aber was ist mit child documents? https://bookdown.org/yihui/rmarkdown-cookbook/child-document.html

-->

![*Video: Reports in RMarkdown (45min)*](https://youtu.be/VUQseeP65t8)


### Kernaussagen

#### Parametrisierte Berichte  
Sie ermöglichen es, einen oder mehrere Parameter anzugeben, um die R Markdown Analyse anzupassen. Dies ist zum Beispiel nützlich, um eine Reportvorlage in mehreren ähnlichen Szenarien wiederverwenden zu können. Beispiele können sein:

  - Steuern des Verhaltens von knitr (z. B. angeben, ob der Code angezeigt werden soll oder nicht).
  - Ergebnisse für bestimmte Subsets der Daten zu generieren.
  - Mehrfaches Ausführen einer einzelnen Analyse für verschiedene Annahmen.

#### Parameter setzen  
Parameter werden in dem YAML-Abschnitt des R Markdown Dokumentes definiert. Wir können mit jedem Key: Value Paar in einer neuen Zeile einen oder mehrere Parameter angeben. Als Beispiel wird hier der Parameter `datum` definiert:

```yaml
---
title: Mein Report
output: html_document
params:
  datum: "26.11.2021"
---
```

#### Parameter einbinden  
Parameter die in dem YAML-Abschnitt definiert wurden stehen als Liste namens `params` zur Verfügung. Um auf einen Parameter im Code zuzugreifen, benutzt Ihr `params$parametername`. Als Beispiel seht ihr ein Stück Markdown Text mit inline R Code der den Parameter `datum` aufruft. 

```
Das heutige Datum ist: `r knitr::inline_expr('params$datum')` 
```

Daraus wird:  
Das heutige Datum ist: `r params$datum`


#### Parameter und Code Blöcke
Parameter können nicht nur in den Text einfließen. Sie können auch genutzt werden, um Argumente in Code Blöcken zentral zu definieren. Es ist zum Beispiel möglich, eine Parameter `params$print_code` zu definieren um damit an bestimmten Stellen das `echo` Argument von Code Blöcken zu steuern. Ist der Parameter auf `print_code: TRUE` gesetzt werden die Code Blöcke in den Report eingebunden. Ist der Parameter auf `print_code: FALSE` werden die Code Blöcke nicht in den Report eingefügt. 

<!-- Hier könnte noch das gleiche nur mit eval erklärt werden. dass dann manche Codeböcke nur ausgeführt werden wenn der Parameter true ist -->



```yaml
---
title: Mein Report
output: html_document
params:
  print_code: FALSE
---
```


````
```{r, setup, include=FALSE}`r ''`
knitr::opts_chunk$set(echo = params$printcode)
```
````

