## Einführung in RStudio

``` {r pakete_laden, echo=FALSE, include=FALSE}
library(readr)
plastics <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-01-26/plastics.csv', show_col_types = FALSE)
```

Ab dieser Woche geht es ans Eingemachte: Nachdem Ihr in den vergangenen Lektionen bereits erste Codezeilen ausgeführt habt, beginnen wir nun zu programmieren. Um die R-Dateien, die wir nutzen werden, lokal zu öffnen, benötigt Ihr [R](https://ftp.fau.de/cran/){target="_blank"} und [RStudio](https://rstudio.com/products/rstudio/download/#download){target="_blank"}. Versucht gerne selbst beide Programme für das Euer Betriebssystem zu installieren – idealerweise auf einem Laptop oder PC, auf dem Ihr **Adminrechte** habt. Gerne auch auf Eurem privaten PC. Bei Installationsschwierigkeiten könnt Ihr uns gerne vor unserer Live-Session am Freitag **per E-Mail** an Nina (nina.h@correlaid.org) kontaktieren - dann lösen wir die Herausforderungen mit Euch gemeinsam.

Placeholder: Video (15min)

Speaker Notes:
- R und RStudio installieren
- Neuen File öffnen: Optionen erklären
- Verschiedene Bereiche in IDE erklären
- Erste kleine Übungen mit Syntax:
  - Variablenassignment (<-)
  - Funktionen Funktion(Argument1, Argument2)
  - Kommentare (werden von dem Intepreter ignoriert)
  - Schlüsselwörter, die eine bestimmte Bedeutung haben
  - Groß- und Kleinschreibung beachten
  - help()/?
- Datensatz: Verschmutzung durch Plastik - Die Bewegung #breakfreefromplastic setzt sich für die Reduktion von Einwegplastik ein
- Im Rahmen ihrer Tätigkeit sammeln sie weltweit Plastik, das nicht angemessen entsorgt wurde, ein und erheben dabei Daten zu den gefundenen Plastikteilen - z.B. in welchem Land, in welchem Jahr, von welcher Firma und was gefunden wurde
- Die Daten aus 2020 schauen wir uns in diesem Kurs gemeinsam an und bedanken uns an dieser Stelle an #breakfreefromplastic, der Tidyverse-Community und Sarah Sauve

### Kernaussagen 
#### R
- R ist eine **freie, statistische Programmiersprache**
- Die **Groß- und Kleinschreibung** muss in R unbedingt beachtet werden

#### RStudio
- RStudio ist auf R spezialisierte **integrierte Entwicklungsumgebung** (eng. Integrated Development Environment oder IDE), in der Ihr Code schreiben, ausführen, auf Dokumentation und Dateien zugreift, Eure Arbeit mit Anderen teilen könnt uvm.
- Im **Code Editor** (zu dt. Codebearbeitungsprogramm) wird programmiert
- Den Code könnt Ihr mit einem Klick auf **"Run/Run All"** oder mit **"CTRL + Enter"** ausführen
- In der **Console** erhaltet Ihr die Ergebnisse Eurer Programmierung
- Bei R Markdown-Dateien öffnet sich - je nach Einstellung - ein **externes Fenster** für den HTML/PDF-Bericht, bei Shiny Web Apps ein externes Fenster, in dem Ihr Eure App testen könnt
- In der **Environment** (zu dt. Umgebung) sind Variablen (also auch Eure Daten) Eurer Arbeit gespeichert, weshalb wir den **Work Space** (zu dt. Arbeitsspeicher) nie speichern sollten - er verbraucht nur Platz
- Neben dem Environment findet Ihr Reiter zur **Historie** der Datei und **Git**, einem wichtigen Kollaborationstool für IT-Projekte, das in RStudio integriert wurde
- Unter dem Environment findet Ihr einen **File Explorer** (zu dt. Dateimanager), mit dem Ihr Dateien auf Eurer Festplatte suchen und per Doppelklick öffnen könnt
- Zusätzlich werden dort Plots (zu dt. Abbildungen), geladene Packages und die **Dokumentation** ("Hilfe") angezeigt, die Ihr mit dem Befehl **help("Funktion")** oder **?Funktion** durchsuchen könnt

#### Dateiformate in RStudio
- Wenn wir **PDF- oder HTML-Reporte** erstellen möchten, ist **R Markdown** für uns das richtige Format
- **Interaktive Visualisierungen** können wir mit **Shiny Web Apps** programmieren
- Daneben gibt es weitere nützliche Dateiformate wie R Präsentationen und das simple R-Skript sowie Mustervorlagen wie zum Beispiel das **"learnR"-Package** für digitales Lernen, mit dem wir auch diese Lernplattform programmiert haben
- Zu einem späteren Zeitpunkt werdet Ihr auch **R-Projekte** nutzen, die eine gesamte **Dateistruktur aus mehreren R-Dateien, zugrundeliegenden Daten und sonstigen Dateien** in einem **leicht teilbaren Format** speichern (Wenn Ihr Euch dafür jetzt schon interessiert, könnt Ihr [hier](https://r4ds.had.co.nz/workflow-projects.html){target="_blank"} mehr dazu lesen)

### Quiz

### Übung
*Hinweis: In den folgenden Übungslektionen gibt es einen Teil, den Ihr innerhalb der Lernplattform erledigen könnt. Den anderen Teil solltet Ihr lokal auf Eurem Rechner ausführen, um Euch an die IDE RStudio (wer weiß noch, wofür das steht?) zu gewöhnen.*

Wenn Ihr mit Eurem Datenprojekt startet, solltet Ihr Euch überlegen, welche **Funktionalitäten** Ihr braucht, um Daten zu importieren, zu bereinigen und zu analyiseren. Die benötigten Funktionalitäten müsst Ihr nicht alle selbst programmieren, dafür gibt es sogenannte **Packages** (zu dt. Pakete) - eine ziemlich gute Sache. Euer Code beginnt deshalb in der Regel mit der **Installation und dem Laden** dieser Funktionalitäten. Dazu nutzen wir die Funktionen **install.packages("package")** und **library(package)**. Die Nutzung von Anführungszeichen ist nur bei der Installation (also für install.packages()) relevant. 

Ein Codechunk (zu dt. Codeblock), also ein Abschnitt mit Code, der Pakete installiert und lädt, sieht so aus. Hier wurde der Code auskommentiert (da wir alle Pakete, die für die Lernplattform notwendig sind für Euch schon installiert und geladen haben).

Notiz: here::here()

```{r pakete, exercise = TRUE}
# Installation und Laden des Packages "readr"
#install.packages("readr")
#library(readr)
```

Mit der Notation "package::funktion()" kennzeichnen wir, woher eine Funktion kommt und können - unabhängig von geladenen Package-Libraries - Funktionen nutzen. Die Funktionen folgen dem Syntax Funktion(argument1, argument2, ...). CSV-Dateien können u.a. mit dem Package **"readr"** und die Funktion **"read_csv"** geladen werden. Die geladenen Daten werden dann in einem Dataframe gespeichert - hier wird dem Datensatz der Name "plastics" zugewiesen ("Name <- Objekt"). Über diesen ist er dann im weiteren Skript abrufbar.
``` {r einlesen, exercise = TRUE}
# Hier laden wir mit dem readr-Package und der Funktion "read_csv()" unseren Datensatz.
plastics <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-01-26/plastics.csv', show_col_types = FALSE)
```

Überprüft hier nochmal, als welches Objekt die Funktion "read_csv()" unseren Datensatz speichert. Wenn Ihr dann auf "Antwort einreichen" klickt, bekommt Ihr Feedback zu Eurem Code. Mit Hilfe von "Lösung anzeigen" könnt Ihr nachschauen, wie die richtige Lösung aussieht.
```{r datenobjekt, exercise = TRUE}
# Euer Code hier
```

```{r datenobjekt-solution}
# Datenformate überprüfen wir mit "typeof()", Objektarten mit "class()"
class(plastics)
```

```{r datenobjekt-check}
grade_this_code()
```

Mit der Funktion "head()" könnt Ihr Euch die ersten fünf Beobachtungen anzeigen lassen, um den Datensatz zu erkunden.
``` {r datenstruktur2, exercise = TRUE}
head(plastics)
```
Um eine Übersicht über die Variablen zu bekommen, könnt Ihr Euch mit der Funktion "colnames()" deren Namen anzeigen lassen.
``` {r variablen, exercise = TRUE}
colnames(plastics)
```

Die Funktionen **nrow(), ncol() und dim()** helfen Euch die **Dimensionen** Eures Datensatzes zu bestimmen. Mit help("Funktion") könnt Ihr Euch über RStudio in der Konsole die Erklärung zu den Funktionen anzeigen lassen. Nutzt das bisher Gelernte, um Euch die Spaltenanzahl (also die Anzahl an Variablen) ausgeben zu lassen.

```{r exercise1, exercise = TRUE}
# Euer Code hier
```

```{r exercise1-solution}
ncol(plastics)
```

```{r exercise1-check}
  give_code_feedback(grade_this({
    pass_if_equal(.solution, "Gut gemacht!")
    if (.result == 13880) {
      fail("Das ist die Zeilenanzahl, also die Anzahl an Beobachtungen!")
    }
    fail()
  }))
```

Elementare Dataframemerkmale könnt Ihr Euch mit der Funktion **"summary()"** anzeigen lassen. Bei Text sind das Länge, Objektart und Mode; bei numerischen Werten Minimum, Mittelwert, Maximum, Quartile und fehlende Werte.
``` {r datenstruktur1, exercise = TRUE}
summary(plastics)
```

### Und jetzt Ihr
Legt nun eine neue R Markdown-Datei auf Eurem Rechner an und:

1. Installiert und ladet das Package "readr".
2. Lest den Datensatz ein. Ihr findet ihn unter diesem [Link]( 'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-01-26/plastics.csv'){target="_blank"}
3. Nutzt die vorgestellten Funktionen, um den Datensatz zu erkunden.